<ion-header>
  <ion-navbar>
    <ion-title>
      Byteball
    </ion-title>
    <ion-buttons end>
      <button ion-button (click)="showNavOptions($event)">
        <ion-icon name="ios-settings-outline"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <form [formGroup]="cashbackData" (ngSubmit)="submitCashback()">
    <div margin-bottom>
      <h1>Byteball Cashback</h1>
    </div>

    <div margin-top padding-bottom>

      <ion-item>
        <ion-label color="primary" stacked>Order ID</ion-label>
        <ion-input type="text" placeholder="ID" clearInput
                   (ionFocus)="hideButton()" (ionBlur)="showButton()"
                   formControlName="order_id"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label color="primary" stacked>Purchase amount</ion-label>
        <ion-input type="number" placeholder="â‚¬" pattern="[0-9]*"
                   (ionFocus)="hideButton()" (ionBlur)="showButton()"
                   formControlName="currency_amount"></ion-input>
      </ion-item>
      <ion-item [hidden]="!cashbackData.controls['address'].valid">
        <ion-label color="primary" stacked>Receiver</ion-label>
        <ion-input type="text" formControlName="address" disabled></ion-input>
      </ion-item>

    </div>

    <div margin-top >
      <ion-row>
        <ion-col>
          <ion-buttons>
            <button ion-button full (click)="scanQRcode()" type="button">
              <ion-spinner name="dots" [hidden]="!openingQRCodeScanner"></ion-spinner>
              <span [hidden]="openingQRCodeScanner">QR Code</span>
            </button>
          </ion-buttons>
        </ion-col>
        <ion-col>
          <ion-buttons>
            <button ion-button full (click)="openEmailInput()" type="button">
              Email
            </button>
          </ion-buttons>
        </ion-col>
      </ion-row>
    </div>


    <ion-footer>
      <ion-buttons>
        <button ion-button full  type="submit" [ngClass]="{'hide': !showButtons}"
                [disabled]="!cashbackData.valid">
          Submit Cashback
        </button>
      </ion-buttons>
    </ion-footer>
  </form>

</ion-content>
